# graphile_worker.jobs

## 概要

## カラム一覧

| 名前 | タイプ | デフォルト値 | Nullable | 子テーブル | 親テーブル | コメント |
| ---- | ------ | ------------ | -------- | ---------- | ---------- | -------- |
| id | bigint | nextval('graphile_worker.jobs_id_seq'::regclass) | false |  |  |  |
| queue_name | text |  | true |  |  |  |
| task_identifier | text |  | false |  |  |  |
| payload | json | '{}'::json | false |  |  |  |
| priority | integer | 0 | false |  |  |  |
| run_at | timestamp with time zone | now() | false |  |  |  |
| attempts | integer | 0 | false |  |  |  |
| max_attempts | integer | 25 | false |  |  |  |
| last_error | text |  | true |  |  |  |
| created_at | timestamp with time zone | now() | false |  |  |  |
| updated_at | timestamp with time zone | now() | false |  |  |  |
| key | text |  | true |  |  |  |
| locked_at | timestamp with time zone |  | true |  |  |  |
| locked_by | text |  | true |  |  |  |
| revision | integer | 0 | false |  |  |  |
| flags | jsonb |  | true |  |  |  |

## 制約一覧

| 名前 | タイプ | 定義 |
| ---- | ---- | ---------- |
| jobs_key_check | CHECK | CHECK ((length(key) > 0)) |
| jobs_pkey | PRIMARY KEY | PRIMARY KEY (id) |
| jobs_key_key | UNIQUE | UNIQUE (key) |

## INDEX一覧

| 名前 | 定義 |
| ---- | ---------- |
| jobs_pkey | CREATE UNIQUE INDEX jobs_pkey ON graphile_worker.jobs USING btree (id) |
| jobs_key_key | CREATE UNIQUE INDEX jobs_key_key ON graphile_worker.jobs USING btree (key) |
| jobs_priority_run_at_id_locked_at_without_failures_idx | CREATE INDEX jobs_priority_run_at_id_locked_at_without_failures_idx ON graphile_worker.jobs USING btree (priority, run_at, id, locked_at) WHERE (attempts < max_attempts) |

## トリガー

| 名前 | 定義 |
| ---- | ---------- |
| _100_timestamps | CREATE TRIGGER _100_timestamps BEFORE UPDATE ON graphile_worker.jobs FOR EACH ROW EXECUTE PROCEDURE graphile_worker.tg__update_timestamp() |
| _500_decrease_job_queue_count | CREATE TRIGGER _500_decrease_job_queue_count AFTER DELETE ON graphile_worker.jobs FOR EACH ROW WHEN ((old.queue_name IS NOT NULL)) EXECUTE PROCEDURE graphile_worker.jobs__decrease_job_queue_count() |
| _500_decrease_job_queue_count_update | CREATE TRIGGER _500_decrease_job_queue_count_update AFTER UPDATE OF queue_name ON graphile_worker.jobs FOR EACH ROW WHEN (((new.queue_name IS DISTINCT FROM old.queue_name) AND (old.queue_name IS NOT NULL))) EXECUTE PROCEDURE graphile_worker.jobs__decrease_job_queue_count() |
| _500_increase_job_queue_count | CREATE TRIGGER _500_increase_job_queue_count AFTER INSERT ON graphile_worker.jobs FOR EACH ROW WHEN ((new.queue_name IS NOT NULL)) EXECUTE PROCEDURE graphile_worker.jobs__increase_job_queue_count() |
| _500_increase_job_queue_count_update | CREATE TRIGGER _500_increase_job_queue_count_update AFTER UPDATE OF queue_name ON graphile_worker.jobs FOR EACH ROW WHEN (((new.queue_name IS DISTINCT FROM old.queue_name) AND (new.queue_name IS NOT NULL))) EXECUTE PROCEDURE graphile_worker.jobs__increase_job_queue_count() |
| _900_notify_worker | CREATE TRIGGER _900_notify_worker AFTER INSERT ON graphile_worker.jobs FOR EACH STATEMENT EXECUTE PROCEDURE graphile_worker.tg_jobs__notify_new_jobs() |

## ER図

![er](graphile_worker.jobs.svg)

---

> Generated by [tbls](https://github.com/k1LoW/tbls)
